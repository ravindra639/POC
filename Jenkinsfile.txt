pipeline {
  environment {
      TFS_BRANCH = "master"
  }
  parameters {
    string(name: 'BUILD_NUM', defaultValue: '', description: '')
    string(name: 'BUILD_NAME', defaultValue: '', description: '')
    booleanParam(defaultValue: true, description: '', name: 'BUILD')
    booleanParam(defaultValue: true, description: '', name: 'DEPLOY')
    booleanParam(defaultValue: true, description: '', name: 'FULLTEST')
    booleanParam(defaultValue: true, description: '', name: 'PERFORMTEST')
    booleanParam(defaultValue: true, description: '', name: 'SECURITYTEST')
  }
  agent {label 'slave1'}
  stages {
    stage('BUILD') {
		when {
                expression { params.BUILD == true }
             }
      steps {
        script {
            currentBuild.displayName = "${BUILD_NUM}"
            currentBuild.description = ""
        }
	bat 'sleep 2m'
        bat 'echo BUILD STAGE'
      }
    }
    stage('DEPLOY') {
		when {
                expression { params.DEPLOY == true }
             }
    steps {
          bat 'echo DEPLOY STAGE'
      }
    }
    stage ('FULLTEST') {
			when {
                expression { params.FULLTEST == true }
             }
            steps {                
                script{
                    currentBuild.displayName = "${BUILD_NUM}"
                    currentBuild.description = ""
                    bat 'echo FULL STAGE'
                }                                              
            }
        }
	stage ('PERFORMTEST') {
			when {
                expression { params.PERFORMTEST == true }
             }
            steps {
                  bat 'echo PERFORM STAGE'
      }
        }
	stage ('SECURITYTEST') {
			when {
                expression { params.SECURITYTEST == true }
             }
            steps {
                     bat 'echo SECURITY STAGE'
      }
        }
  }
}
